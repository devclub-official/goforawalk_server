version: "3.8"

services:
  app-server: # 서비스 이름
    build: # 빌드 설정
      context: .
      dockerfile: Dockerfile
    image: app-server:latest # 빌드된 이미지 이름과 태그
    container_name: app-server-container # 실행될 컨테이너 이름
    restart: always # 컨테이너 재시작 정책
    ports:
      - "8080:8080" # 포트 매핑
    environment:
      - SPRING_PROFILES_ACTIVE=prod
    volumes: # 런타임에 필요한 볼륨 설정 (데이터 영속성 등)
      - ./upload:/app/upload # 호스트의 ./upload 디렉토리를 컨테이너의 /app/upload와 연결